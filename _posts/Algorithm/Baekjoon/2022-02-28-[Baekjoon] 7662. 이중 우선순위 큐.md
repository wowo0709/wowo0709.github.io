---
layout: single
title: "[Baekjoon] 7662. ì´ì¤‘ ìš°ì„ ìˆœìœ„ í"
categories: ['Algorithm', 'Heap']
toc: true
toc_sticky: true
tag: ['Memoization']
---

# ë¬¸ì œ ì„¤ëª…

## ë¬¸ì œ

ì´ì¤‘ ìš°ì„ ìˆœìœ„ í(dual priority queue)ëŠ” ì „í˜•ì ì¸ ìš°ì„ ìˆœìœ„ íì²˜ëŸ¼ ë°ì´í„°ë¥¼ ì‚½ì…, ì‚­ì œí•  ìˆ˜ ìˆëŠ” ìë£Œ êµ¬ì¡°ì´ë‹¤. ì „í˜•ì ì¸ íì™€ì˜ ì°¨ì´ì ì€ ë°ì´í„°ë¥¼ ì‚­ì œí•  ë•Œ ì—°ì‚°(operation) ëª…ë ¹ì— ë”°ë¼ ìš°ì„ ìˆœìœ„ê°€ ê°€ì¥ ë†’ì€ ë°ì´í„° ë˜ëŠ” ê°€ì¥ ë‚®ì€ ë°ì´í„° ì¤‘ í•˜ë‚˜ë¥¼ ì‚­ì œí•˜ëŠ” ì ì´ë‹¤. ì´ì¤‘ ìš°ì„ ìˆœìœ„ íë¥¼ ìœ„í•´ì„  ë‘ ê°€ì§€ ì—°ì‚°ì´ ì‚¬ìš©ë˜ëŠ”ë°, í•˜ë‚˜ëŠ” ë°ì´í„°ë¥¼ ì‚½ì…í•˜ëŠ” ì—°ì‚°ì´ê³  ë‹¤ë¥¸ í•˜ë‚˜ëŠ” ë°ì´í„°ë¥¼ ì‚­ì œí•˜ëŠ” ì—°ì‚°ì´ë‹¤. ë°ì´í„°ë¥¼ ì‚­ì œí•˜ëŠ” ì—°ì‚°ì€ ë˜ ë‘ ê°€ì§€ë¡œ êµ¬ë¶„ë˜ëŠ”ë° í•˜ë‚˜ëŠ” ìš°ì„ ìˆœìœ„ê°€ ê°€ì¥ ë†’ì€ ê²ƒì„ ì‚­ì œí•˜ê¸° ìœ„í•œ ê²ƒì´ê³  ë‹¤ë¥¸ í•˜ë‚˜ëŠ” ìš°ì„ ìˆœìœ„ê°€ ê°€ì¥ ë‚®ì€ ê²ƒì„ ì‚­ì œí•˜ê¸° ìœ„í•œ ê²ƒì´ë‹¤. 

ì •ìˆ˜ë§Œ ì €ì¥í•˜ëŠ” ì´ì¤‘ ìš°ì„ ìˆœìœ„ í Qê°€ ìˆë‹¤ê³  ê°€ì •í•˜ì. Qì— ì €ì¥ëœ ê° ì •ìˆ˜ì˜ ê°’ ìì²´ë¥¼ ìš°ì„ ìˆœìœ„ë¼ê³  ê°„ì£¼í•˜ì. 

Qì— ì ìš©ë  ì¼ë ¨ì˜ ì—°ì‚°ì´ ì£¼ì–´ì§ˆ ë•Œ ì´ë¥¼ ì²˜ë¦¬í•œ í›„ ìµœì¢…ì ìœ¼ë¡œ Qì— ì €ì¥ëœ ë°ì´í„° ì¤‘ ìµœëŒ“ê°’ê³¼ ìµœì†Ÿê°’ì„ ì¶œë ¥í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ë¼.

## ì…ë ¥

ì…ë ¥ ë°ì´í„°ëŠ” í‘œì¤€ì…ë ¥ì„ ì‚¬ìš©í•œë‹¤. ì…ë ¥ì€ Tê°œì˜ í…ŒìŠ¤íŠ¸ ë°ì´í„°ë¡œ êµ¬ì„±ëœë‹¤. ì…ë ¥ì˜ ì²« ë²ˆì§¸ ì¤„ì—ëŠ” ì…ë ¥ ë°ì´í„°ì˜ ìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì •ìˆ˜ Tê°€ ì£¼ì–´ì§„ë‹¤. ê° í…ŒìŠ¤íŠ¸ ë°ì´í„°ì˜ ì²«ì§¸ ì¤„ì—ëŠ” Qì— ì ìš©í•  ì—°ì‚°ì˜ ê°œìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì •ìˆ˜ k (k â‰¤ 1,000,000)ê°€ ì£¼ì–´ì§„ë‹¤. ì´ì–´ì§€ëŠ” k ì¤„ ê°ê°ì—” ì—°ì‚°ì„ ë‚˜íƒ€ë‚´ëŠ” ë¬¸ì(â€˜Dâ€™ ë˜ëŠ” â€˜Iâ€™)ì™€ ì •ìˆ˜ nì´ ì£¼ì–´ì§„ë‹¤. â€˜I nâ€™ì€ ì •ìˆ˜ nì„ Qì— ì‚½ì…í•˜ëŠ” ì—°ì‚°ì„ ì˜ë¯¸í•œë‹¤. ë™ì¼í•œ ì •ìˆ˜ê°€ ì‚½ì…ë  ìˆ˜ ìˆìŒì„ ì°¸ê³ í•˜ê¸° ë°”ë€ë‹¤. â€˜D 1â€™ëŠ” Qì—ì„œ ìµœëŒ“ê°’ì„ ì‚­ì œí•˜ëŠ” ì—°ì‚°ì„ ì˜ë¯¸í•˜ë©°, â€˜D -1â€™ëŠ” Q ì—ì„œ ìµœì†Ÿê°’ì„ ì‚­ì œí•˜ëŠ” ì—°ì‚°ì„ ì˜ë¯¸í•œë‹¤. ìµœëŒ“ê°’(ìµœì†Ÿê°’)ì„ ì‚­ì œí•˜ëŠ” ì—°ì‚°ì—ì„œ ìµœëŒ“ê°’(ìµœì†Ÿê°’)ì´ ë‘˜ ì´ìƒì¸ ê²½ìš°, í•˜ë‚˜ë§Œ ì‚­ì œë¨ì„ ìœ ë…í•˜ê¸° ë°”ë€ë‹¤.

ë§Œì•½ Qê°€ ë¹„ì–´ìˆëŠ”ë° ì ìš©í•  ì—°ì‚°ì´ â€˜Dâ€™ë¼ë©´ ì´ ì—°ì‚°ì€ ë¬´ì‹œí•´ë„ ì¢‹ë‹¤. Qì— ì €ì¥ë  ëª¨ë“  ì •ìˆ˜ëŠ” 32-ë¹„íŠ¸ ì •ìˆ˜ì´ë‹¤. 

## ì¶œë ¥

ì¶œë ¥ì€ í‘œì¤€ì¶œë ¥ì„ ì‚¬ìš©í•œë‹¤. ê° í…ŒìŠ¤íŠ¸ ë°ì´í„°ì— ëŒ€í•´, ëª¨ë“  ì—°ì‚°ì„ ì²˜ë¦¬í•œ í›„ Qì— ë‚¨ì•„ ìˆëŠ” ê°’ ì¤‘ ìµœëŒ“ê°’ê³¼ ìµœì†Ÿê°’ì„ ì¶œë ¥í•˜ë¼. ë‘ ê°’ì€ í•œ ì¤„ì— ì¶œë ¥í•˜ë˜ í•˜ë‚˜ì˜ ê³µë°±ìœ¼ë¡œ êµ¬ë¶„í•˜ë¼. ë§Œì•½ Qê°€ ë¹„ì–´ìˆë‹¤ë©´ â€˜EMPTYâ€™ë¥¼ ì¶œë ¥í•˜ë¼.

## ì˜ˆì œ ì…ë ¥ 1 

```
2
7
I 16
I -5643
D -1
D 1
D 1
I 123
D -1
9
I -45
I 653
D 1
I -642
I 45
I 97
D 1
D -1
I 333
```

## ì˜ˆì œ ì¶œë ¥ 1 

```
EMPTY
333 -45
```

## ì¶œì²˜

[ICPC](https://www.acmicpc.net/category/1) > [Regionals](https://www.acmicpc.net/category/7) > [Asia Pacific](https://www.acmicpc.net/category/42) > [Korea](https://www.acmicpc.net/category/211) > [Nationwide Internet Competition](https://www.acmicpc.net/category/256) > [Daejeon Nationalwide Internet Competition 2013](https://www.acmicpc.net/category/detail/1124) Dë²ˆ

- ë°ì´í„°ë¥¼ ì¶”ê°€í•œ ì‚¬ëŒ: [BaaaaaaaaaaarkingDog](https://www.acmicpc.net/user/BaaaaaaaaaaarkingDog), [Nada](https://www.acmicpc.net/user/Nada)
- ë°ì´í„°ë¥¼ ë§Œë“  ì‚¬ëŒ: [baekjoon](https://www.acmicpc.net/user/baekjoon)

## ì•Œê³ ë¦¬ì¦˜ ë¶„ë¥˜

- [ìë£Œ êµ¬ì¡°](https://www.acmicpc.net/problem/tag/175)
- [íŠ¸ë¦¬ë¥¼ ì‚¬ìš©í•œ ì§‘í•©ê³¼ ë§µ](https://www.acmicpc.net/problem/tag/74)
- [ìš°ì„ ìˆœìœ„ í](https://www.acmicpc.net/problem/tag/59)

<br>

# ë¬¸ì œ í’€ì´

## \# Heap

<br>

## í’€ì´ ê³¼ì •

ì•ì„œ í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ì—ì„œë„ ê°™ì€ ì´ë¦„ì˜ ë¬¸ì œë¥¼ í’€ì—ˆì—ˆëŠ”ë°ìš”, ê³µìœ í•˜ëŠ” í•µì‹¬ ê°œë…ì€ ê°™ì§€ë§Œ ë°±ì¤€ì—ì„œëŠ” ì‹œê°„ ì œí•œì„ ë” ì—„ê²©í•˜ê²Œ í•˜ê³  ìˆì–´ì„œ ì½”ë“œ ìƒì—ì„œ ì¡°ê¸ˆ ë‹¤ë¥¸ ì ì´ ìˆì–´ í¬ìŠ¤íŒ…ì„ í•©ë‹ˆë‹¤. 

ìì„¸í•œ ì„¤ëª…ì€ ì½”ë“œë¥¼ ë³´ë©´ì„œ í•˜ê² ìŠµë‹ˆë‹¤. 

<br>

## ì „ì²´ ì½”ë“œ

**ğŸ˜‚ 1ë²ˆ í’€ì´: ì‹œê°„ ì´ˆê³¼**

í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ì—ì„œ í’€ì—ˆì„ ë‹¹ì‹œì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ í’€ì—ˆìŠµë‹ˆë‹¤. ì¼ë‹¨ì€ min_heapì— ëª¨ë‘ ë„£ì–´ë†“ê³ , ì‚­ì œ(D) ëª…ë ¹ì´ ì£¼ì–´ì§ˆ ë•Œë§ˆë‹¤ min_heapê³¼ max_heapì— ìˆëŠ” ì›ì†Œë¥¼ ëª¨ë‘ ì˜®ê²¨ì„œ ìµœì†Œ/ìµœëŒ€ ê°’ì„ ì°¾ëŠ” ê²ƒì…ë‹ˆë‹¤. 

í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ì—ì„œëŠ” í†µê³¼ì˜€ì§€ë§Œ, ë°±ì¤€ì—ì„œëŠ” í†µê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. 

```python
from heapq import heappush, heappop
import sys
input = sys.stdin.readline

for t in range(int(input())):
    max_heap, min_heap = [], []
    for _ in range(int(input())):
        cmd, n = input().rstrip().split()
        if cmd == 'I':
            heappush(min_heap, int(n))
        elif cmd == 'D':
            if not max_heap and not min_heap:
                continue
            if n == '1':
                while min_heap:
                    heappush(max_heap,-heappop(min_heap))
                heappop(max_heap)
            elif n == '-1':
                while max_heap:
                    heappush(min_heap,-heappop(max_heap))
                heappop(min_heap)
    h = sorted(max_heap+min_heap)
    print(*[h[-1],h[0]]) if h else print('EMPTY')
```



**ğŸ˜Š 2ë²ˆ í’€ì´: ì •ë‹µ**

ë” íš¨ìœ¨ì ì¸ í’€ì´ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤. 

ìœ„ í’€ì´ì—ì„œëŠ” ë§¤ë²ˆ í™ì— ìˆëŠ” ì›ì†Œë“¤ì„ ë‹¤ë¥¸ í™ìœ¼ë¡œ ì˜®ê²¨ì£¼ëŠ” ë° ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë ¸ìŠµë‹ˆë‹¤. 2ë²ˆ í’€ì´ì—ì„œëŠ” ê·¸ ê³¼ì •ì„ ì—†ì•´ìŠµë‹ˆë‹¤. 

ëŒ€ì‹ , ê° ì›ì†Œë¥¼ pushí•  ë•Œ ì¸ë±ìŠ¤ì™€ í•¨ê»˜ pushí•˜ê³ , popí•  ë•Œ ì¸ë±ìŠ¤ë¥¼ ì´ìš©í•´ ê·¸ ìˆ«ìê°€ ì‚­ì œëœ ìˆ«ìì¸ì§€ ì•„ë‹Œì§€ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤. 

```python
from heapq import heappush, heappop
import sys
input = sys.stdin.readline

for t in range(int(input())):
    k = int(input())
    max_heap, min_heap = [], []
    exists = [False for _ in range(k)] # idxë²ˆì§¸ ëª…ë ¹ì–´ë¡œ ì‚½ì…ëœ ìˆ˜ê°€ ì¡´ì¬í•˜ëŠ”ì§€ ì—¬ë¶€
    for idx in range(k):
        cmd, n = input().rstrip().split()
        if cmd == 'I':
            heappush(min_heap, (int(n), idx))
            heappush(max_heap, (-int(n), idx))
            exists[idx] = True
        elif cmd == 'D':
            if n == '1':
                while max_heap and not exists[max_heap[0][1]]:
                    heappop(max_heap)
                if max_heap: 
                    exists[heappop(max_heap)[1]] = False
            elif n == '-1':
                while min_heap and not exists[min_heap[0][1]]:
                    heappop(min_heap)
                if min_heap: 
                    exists[heappop(min_heap)[1]] = False

    while max_heap and not exists[max_heap[0][1]]:
        heappop(max_heap)
    while min_heap and not exists[min_heap[0][1]]:
        heappop(min_heap)
    if not max_heap or not min_heap:
        print('EMPTY')
    else:
        print(-max_heap[0][0], min_heap[0][0])
```



<br>

## ì •ë¦¬

* 















