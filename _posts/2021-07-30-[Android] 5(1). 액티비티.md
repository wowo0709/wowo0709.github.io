---
layout: single
title: "[Android] 5(1). 액티비티"
---







<br>

# 액티비티

안드로이드는 4개의 핵심 컴포넌트를 제공합니다. 아래 그림에서 1~4는 컴포넌트, 5와 6은 컴포넌트를 사용하기 위한 도구입니다. 

![image-20210729225140447](C:\Users\wjsdu\AppData\Roaming\Typora\typora-user-images\image-20210729225140447.png)

1. 액티비티: 화면 UI를 담당하는 컴포넌트
2. 브로드캐스트 리시버: 시스템 또는 사용자가 발생하는 메시지를 수신하는 컴포넌트
3. 서비스: 백그라운드 코드 처리를 담당하는 컴포넌트(서브 스레드와 비슷한 개념으로 화면이 없는 Activity)
4. 콘텐트 프로바이더: 앱끼리 데이터를 공유하기 위한 컴포넌트
5. 인텐트: 1~3 까지 3개의 컴포넌트를 실행하기 위해 시스템에 전달되는 메시지 도구
6. 콘텐트 리졸버: 콘텐트 프로바이더가 제공하는 데이터를 사용하기 위한 도구

<br>

이 중 먼저 액티비티에 대해 살펴봅니다. 액티비티는 사용자가 직접 보고 입력하는 화면을 담당하는 컴포넌트입니다. 

### <span style="color:rgb(93, 231, 116)">컨텍스트</span>

---

* **컨텍스트**
    * 시스템을 사용하기 위한 정보(프로퍼티)와 도구(메서드)가 담겨 있는 클래스 (액티비티 실행, 서비스 실행, 파일 읽고 쓰기, 권한 등)
    * 대부분의 컨텍스트는 컴포넌트 실행 시 함께 생성되고 생성된 컴포넌트가 가지고 있는 메서드를 호출하여 각각의 도구를 이용
    * 액티비티는 컨텍스트를 상속받았기 때문에 코드상에서 baseContext를 호출하는 것만으로 안드로이드의 기본 기능 사용 가능

<br>

* 컨텍스트의 종류

    1. **애플리케이션 컨텍스트**

        애플리케이션의 핵심 기능을 담고 있는 클래스로 앱을 통틀어 단 하나의 인스턴스만 생성. 액티비티나 서비스 같은 컴포넌트에서 **applicationContext**를 직접 호출해서 사용. (단 하나)

    2. **베이스 컨텍스트**

        안드로이드의 4대 메이저 컴포넌트인 **액티비티, 서비스, 컨텐트 프로바이더, 브로드캐스트 리시버**의 기반 클래스. 각각의 컴포넌트에서 **baseContext** 또는 **this**로 호출해서 사용하며 컴포넌트의 개수만큼 컨텍스트도 생성. (여러 개)

<br>

**컴포넌트별 컨텍스트의 기능**

화면과 관련된 기능은 액티비티의 컨텍스트에서만 가능. 

| 기능 \ 컨텍스트             | Application | Activity | Service | Content Provider | Broadcast Receiver |
| --------------------------- | ----------- | -------- | ------- | ---------------- | ------------------ |
| Show a Dialog               | No          | Yes      | No      | No               | No                 |
| Start an Activity           | No          | Yes      | No      | No               | No                 |
| Layout inflation            | No          | Yes      | No      | No               | No                 |
| Start a Service             | Yes         | Yes      | Yes     | Yes              | Yes                |
| Bind to a Service           | Yes         | Yes      | Yes     | Yes              | No                 |
| Send a Broadcast            | Yes         | Yes      | Yes     | Yes              | Yes                |
| Register Broadcast Receiver | Yes         | Yes      | Yes     | Yes              | No                 |
| Load Resource Values        | Yes         | Yes      | Yes     | Yes              | Yes                |

<br>

<br>

### <span style="color:rgb(93, 231, 116)">인텐트</span>

---

액티비지를 실행하기 위해선 단순히 컨텍스트가 제공하는 메서드를 호출하면 되는데, 이때 실행할 액티비티가 명시된 **인텐트**를 해당 메서드에 전달해야 합니다. 

이 인텐트는 '개발자의 의도'로, 어떤 의도를 가지고 메서드를 실행할 것인지를 인텐트에 담아서 안드로이드에 전달하면 안드로이드는 해당 인텐트를 해석하고 실행합니다. 

프로젝트 생성 시 자동으로 만들어지는 **MainActivity**는 특별한 설정을 하지 않아도 안드로이드에 자동으로 등록되고 실행되지만, 이외에 다른 액티비티를 사용할 때는 반드시 인텐트에 새 액티비티의 이름과 데이터를 담아서 시스템에 전달해야 합니다. 

![image-20210729232942819](C:\Users\wjsdu\AppData\Roaming\Typora\typora-user-images\image-20210729232942819.png)

1. 실행할 대상의 액티비티 이름과 전달할 데이터를 담아서 인텐트를 생성
2. 생성한 인텐트를 **startActivity( )** 메서드에 담아서 호출하면 액티비티 매니저에 전달됨
3. 액티비티 매니저는 인텐트를 분석하여 지정한 액티비티를 실행
4. 전달된 인텐트는 최종 목적지인 타깃 액티비티까지 전달
5. 타깃 액티비티에서는 전달받은 인텐트에 데이터가 있다면 이를 꺼내 쓸 수 있음

<br>

<br>

### <span style="color:rgb(93, 231, 116)">새 액티비티 만들고 실행하기</span>

---

**1. 액티비티 생성**

[Project(Android)] - [java] - 패키지명 우클릭 - [New] - [Activity] - [Empty Activity] 로 새 프로젝트 생성. 

~Activity 라고 액티비티 이름을 입력하면 activity_~ 라는 xml 파일 자동 생성. 

<br>

**2. 뷰 바인딩**

gradle 파일에서 뷰 바인딩 허용하고 MainActivity.kt 에서 binding 프로퍼티 생성, SetContentView 에 binding.root 전달. 

<br>

**3. 인텐트 생성: Intent(컨텍스트, 액티비티)**

액티비티 호출을 위해서는 의도를 포함하는 Intent 인스턴스를 전달해야 함. 

```kotlin
val intent = Intent(this, SubActivity::class.java)
```

❗ **class::java 는 Intent를 사용하기 위한 작성 규칙**

<br>

**4. 액티비티를 호출하며 인텐트 전달: startActivity(인텐트)**

```kotlin
startActivity(intent)
```

<br>

<br>

### <span style="color:rgb(93, 231, 116)">액티비티 사이에 값 주고받기</span>

---

액티비티는 인텐트에 실행 메시지, 데이터 등을 주고 받을 수 있음. 

인텐트 내부에는 **번들(Bundle)**이라는 저장 공간이 있고, 이 번들에 데이터를 담아 주고받음. 

인텐트에 값을 입력할 때는 키와 값의 조합으로 넣고, 꺼낼 때는 키로 참조한다. 

##### <span style="color:rgb(3, 90, 17)">메인 액티비티</style>

<br>

**1. 인텐트에 값 넣기: putExtra( )**

```kotlin
intent.putExtra("from", "Hello Bundle") // String 키, String 값
intent.putExtra("from2", 2021)          // String 키, Int 값
```

<br>











<br>

<br>

### 정리

---

* 
